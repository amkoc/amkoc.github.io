<!DOCTYPE html>
<html>
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Question Wizard</title>
    <!-- Bootstrap -->
    <link href="./bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="./prettify.css" rel="stylesheet">
	<link href="./css.css" rel="stylesheet">
  </head>
  <body>
    <div class='container' id="wrapper">

			<section id="wizard">
			  <div class="page-header">
	            <h1>Question Wizard</h1>
<!-- 	            <p class="subtext">
	            	Answer the questions below, then press 'next'.
	            </p> -->
	          </div>

				<div id="rootwizard">
					<div class="navbar">
						  <div class="navbar-inner">
						    <div class="container" id="tabsContainer">
								<ul>
								  	<li><a href="#tab1" data-toggle="tab">Misc</a></li>
									<li><a href="#tab2" data-toggle="tab">Maintinance/Upkeep</a></li>
									<li><a href="#tab3" data-toggle="tab">Environment</a></li>
									<li><a href="#tab4" data-toggle="tab">Exercise & Schedule</a></li>
									<li><a href="#tab5" data-toggle="tab">Behaviour & Training</a></li>
									<li><a href="#tab6" data-toggle="tab">Finish</a></li>
								</ul>
							</div>
						</div>
					</div>

					<div class="tab-content"> <!-- Add questions here, for each question add a new tab above -->
					    <div class="tab-pane" id="tab1">
					    	<!-- misc tab -->
								<p class="questionText">
						    		Are there any breeds you're already interested in? What attracts you to them?
						    	</p>
						      	<p class="subtext">
						      		If not specific breeds, then what types of dogs are you interested in? Some examples of types include herding dogs, retrievers, small terriers, and more.
						      	</p>
							    <textarea rows="1" cols="1" name="text"></textarea>
						    <hr/>
							    <p class="questionText">
						    		What experience do you have owning dogs? How about training dogs? 
						    	</p>
						      	<p class="subtext">
						      		Have you been the primary caregiver of a dog before? <br/>If so, what breed(s)? What is your experience with puppy or senior dog care?
						      	</p>
							    <textarea rows="1" cols="1" name="text"></textarea>
						    <hr/>
						    	<p class="questionText">
						    		What role is your dog expected to fill and how do you envision your dog fulfilling that role?
						    	</p>
						      	<p class="subtext">
						      		Here's a brief list to get you started:<br/> Companion, hobby (tricks and casual sports participation), working dog, serious dog sports prospect, watch dog (intruder deterrent), service dog for a disability, emotional support animal to mitigate mental illness, etc.<br/>
						      		<a href="#" onclick='openInNewTab("https://www.reddit.com/r/dogs/comments/3bni35/breeds_looking_to_purchaserescue_our_first_dog/csnsz8l")'>Please read this post if you are looking for a watch or guard dog.</a>

						      	</p>
							    <textarea rows="1" cols="1" name="text"></textarea>
						    <hr/>
						    <br/>
							    <p class="questionText">
						    		What size dog are you looking for?
						    	</p>
						      	<p class="subtext">
						      		Give the approximate height of the dog at the shoulders or mention breeds that are around the size you want. Also indicate if there are sizes you really don't want. <br/>
						      		<a href="#" onclick='openInNewTab("http://i.imgur.com/vnz3usJ.jpg")'>Here is a size chart for your convenience.</a>
						      	</p>
						      	<textarea rows="1" cols="1" name="text"></textarea>
						    <hr/>
							    <p class="questionText">
						    		Do you want a puppy, a young adult (1-3 years), an adult, or a senior? Why?
						    	</p>
						      	<p class="subtext">
						      		<ul> 
						      			<li>Puppy - huge time commitment required, adult personality/behavior unknown and impacted by early life experience but ultimately limited by genetics;</li> 
						      			<li>Young adult - youthful exuberance and energy without the puppy headache, adult temperament/behavioral traits mostly apparent but fairly moldable by new life experiences;</li> 
						      			<li> Adult - personality fully formed but slightly moldable by new life experiences, steady energy requirements; senior- old, lazy, needs cuddles, grateful to be adopted.</li>
						      		</ul>
						      	</p>
						      	<textarea rows="1" cols="1" name="text"></textarea>
						    <hr/>
							    <p class="questionText">
						    		Do you have a preference for rescuing a dog vs. going through a knowledgeable and reputable breeder? 
						    	</p>
						      	<p class="subtext">
						      		Please consider adopting a dog from a rescue or shelter. Look for a rescue organization that fosters their animals to get a more reliable assessment of a rescue dog’s behavior and needs.<br/>If you need a dog with very predictable health and behavior, you must go through a good breeder—not craigslist, not the newspaper, not Puppyfind or Kijiji, or anywhere else.<br/><a href="#" onclick='openInNewTab("https://www.reddit.com/r/dogs/wiki/i-dont-want-a-show-dog")'>Here is an introduction on why the quality of breeder is important</a>, and <a href="#" onclick='openInNewTab("http://ownresponsibly.blogspot.com/2011/07/identifying-reputable-breeder.html")'>here is a list of questions that can help you find a good breeder.</a><br/>Feel free to search the subreddit or make your own post for more information.
						      	</p>
						      	<textarea rows="1" cols="1" name="text"></textarea>
					    </div>
						<div class="tab-pane" id="tab2">
						<!-- Maintinance/Upkeep -->
							
					    </div>
					    <div class="tab-pane" id="tab3">
					    </div>
					    <div class="tab-pane" id="tab4">
					    </div>
					    <div class="tab-pane" id="tab5">
					    </div>
						<div class="tab-pane" id="tab6">
							<!-- <div class="num">30/30</div> -->
							<p>
								All done!
					      	</p>
					      	<p id="counter">
					      	</p>
					      	<p class="subtext">
					      		<a id="#button">Click here</a> to post a new topic, or copy the formatted response below;
					      	</p>
					      	<textarea rows="1" cols="1" name="text" id="result"></textarea>
					    </div>
				
						<ul class="pager wizard">
							<li class="previous first" style="display:none;"><a href="#">First</a></li>
							<li class="previous"><a href="#">Previous</a></li>
							<li class="next last" style="display:none;"><a href="#">Last</a></li>
						  	<li class="next"><a href="#">Next</a></li>
						</ul>
					<div id="bar" class="progress">
                      <div class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                    </div>
					</div>
				</div>
			</section>
	</div>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="./bootstrap/js/bootstrap.min.js"></script>
	<script src="./jquery.bootstrap.wizard.js"></script>
	<script src="./urlencode.js"></script>
	<script>
	var redditUrl = '';
	$(document).ready(function() {
		
	
	  	$('#rootwizard').bootstrapWizard({onNext: function(tab, navigation, index) {
	  			var resString = "";
	  			var $total = navigation.find('li').length;
	  			var $missedCount = 0;
				if(index==$total) {
					// grab all previous responses and format them
					if(!$('#tab' + index).find('textarea').val()) {
						// alert('You must enter your name');
						$('#tab' + index).find('textarea').focus();
						return false;
					} else {
						
						for (var i = 1; i < $total; i++) {
							console.log("Processing answer " + i + " of " + $total-1);
							if($('#tab' + i).find('textarea').val()) {

								resString = resString + "* " + $.trim( $('#tab' + i ).find(".questionText").text()) +  "  \n\n" + $.trim($('#tab' + i).find('textarea').val()) + "\n\n"; //grab question and answer, strip annoying tabs and shit, add to string


							} else {
								$missedCount++;
								//resString = resString + "-<br/>";
							}
						}
					}
				}

				$( "#tab" + $total).find('textarea').text($.trim(resString));
				$( "#tab" + $total).find('#counter').text( (($total -1) - $missedCount) + " of " + ($total-1) + " questions" );

				var uecResult 	= urlencode($.trim(resString)); //parse the result for posting to Reddit
				var uecTitle 	= urlencode('[BREEDS][AUTO] Help me pick a dog! (Breed questionarre)');

				redditUrl = 'https://www.reddit.com/r/dogs/submit?selftext=true&title=' + uecTitle + '&text=' + uecResult; //send hugelarge reddit url to the onclick thingy

	

				// Set the name for the next tab
				//$('#tab3').html('Hello, ' + $('#tab2').find('textarea').val());

			}, onTabShow: function(tab, navigation, index) {
				var $total = navigation.find('li').length;
				var $current = index+1;
	  			var $missedCount = 0;

				$( "#tab" + $total ).find(".subtext").click(function() { //grab the reddit url and send it to reddit...
						openInNewTab(redditUrl)
					});

				for (var i = 1; i < $total; i++) {
				if(!$('#tab' + i).find('textarea').val()) {
					$missedCount++;
					}
				}

				var $percent = ( ($total-$missedCount) /$total) * 100;
				//var $percent = ($current/$total) * 100;


				$('#rootwizard .progress-bar').css({width:$percent+'%'});

			}, onTabClick: function(tab, navigation, index) { //stop people from jumping to the end with the tab buttons
				var $total = navigation.find('li').length;
				//console.log(index + " " + tab);
				//if(index==$total) {
					//alert('on tab click disabled');
					return false;
				//}
			}});
		//window.prettyPrint && prettyPrint()
	});

	function openInNewTab(url) { //open shit in a new tab so responses aren't removed
    	$("<a>").attr("href", url).attr("target", "_blank")[0].click();
	}
	</script>
  </body>
</html>
